function getGlobalsDelta(){const e={};for(const t in gear)"custom"!=t&&(e[t]=gear[t].map(e=>({id:e.id,dps:e.dps,selected:e.selected,hidden:e.hidden})));const t={};for(const e in enchant)t[e]=enchant[e].map(e=>({id:e.id,dps:e.dps,selected:e.selected,hidden:e.hidden}));const n={};if("undefined"!=typeof runes)for(const e in runes)n[e]=runes[e].map(e=>({id:e.id,selected:e.selected,hidden:e.hidden}));return{talents:talents.map(e=>({t:e.t.map(e=>e.c)})),buffs:buffs.filter(e=>e.active).map(e=>e.id),rotation:spells,gear:e,enchant:t,runes:n,sod:-1==window.location.href.indexOf("classic.html")}}function updateGlobals(e){for(let t in e.talents)for(let n in e.talents[t].t)talents[t].t[n].c=e.talents[t].t[n];for(let e of buffs)e.active=!1;for(let t of e.buffs)for(let e of buffs)t==e.id&&(e.active=!0);for(let t of e.rotation)for(let e of spells)if(t.id==e.id)for(let n in t)"minlevel"!=n&&"maxlevel"!=n&&"iconname"!=n&&(e[n]=t[n]);for(let e in gear)for(let t of gear[e])t.selected&&(t.selected=!1);for(let t in e.gear)for(let n of e.gear[t])if(gear[t])for(let e of gear[t])n.id==e.id&&(e.dps=n.dps,e.selected=n.selected,e.hidden=n.hidden);for(let e in enchant)for(let t of enchant[e])t.selected&&(t.selected=!1);for(let t in e.enchant)for(let n of e.enchant[t])for(let e of enchant[t])n.id==e.id&&(e.dps=n.dps,e.selected=n.selected,e.hidden=n.hidden);if("undefined"!=typeof runes)for(let e in runes)for(let t of runes[e])t.selected&&(t.selected=!1);for(let t in e.runes)for(let n of e.runes[t])for(let e of runes[t])n.id==e.id&&(e.selected=n.selected,e.hidden=n.hidden);for(let t in e.resistances)e.resistances[t]&&($(".resistances-list.hidden").removeClass("hidden"),$(".js-toggle[data-id='resistances-list']").addClass("active"),$(".resistances[data-id='"+t+"-resist']").click())}